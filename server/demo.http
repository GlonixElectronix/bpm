### AUTHENTICATION

# Obtain JWT token
POST http://localhost:8000/api/auth/token/
Content-Type: application/json

{
    "username": "your_username",
    "password": "your_password"
}

####
# Refresh JWT token
POST http://localhost:8000/api/auth/token/refresh/
Content-Type: application/json

{
    "refresh": "<refresh_token>"
}



### FILES (UPLOADED DOCUMENTS) ENDPOINT


# Upload a PDF file
POST http://localhost:8000/api/files/
Authorization: Bearer <access_token>
Content-Type: multipart/form-data

file: @./sample_invoice.pdf

####

# Upload a JPG file
POST http://localhost:8000/api/files/
Authorization: Bearer <access_token>
Content-Type: multipart/form-data

file: @./sample_receipt.jpg

####

# Update/replace a file (PDF)
PUT http://localhost:8000/api/files/1/
Authorization: Bearer <access_token>
Content-Type: multipart/form-data

file: @./updated_invoice.pdf

####

# Update/replace a file (JPG)
PUT http://localhost:8000/api/files/2/
Authorization: Bearer <access_token>
Content-Type: multipart/form-data

file: @./updated_receipt.jpg

####
# List all files
GET http://localhost:8000/api/files/
Authorization: Bearer <access_token>

####
# View/Download a file (PDF or JPG)
GET http://localhost:8000/api/files/1/
Authorization: Bearer <access_token>

# Response: (file stream, e.g. PDF, JPG, etc)
# If the file exists, the file will be returned as a download or inline view.
# If the file does not exist, HTTP 404 will be returned.

####
# Delete a file
DELETE http://localhost:8000/api/files/1/
Authorization: Bearer <access_token>


### CUSTOMERS CRUD

# List customers
GET http://localhost:8000/api/customers/
Authorization: Bearer <access_token>

####
# Create customer (all fields)
POST http://localhost:8000/api/customers/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_type": "business",
  "salutation": "mr",
  "first_name": "John",
  "last_name": "Doe",
  "company_name": "Acme Corp",
  "display_name": "Acme Corp (John Doe)",
  "email": "john.doe@acme.com",
  "work_phone": "1234567890",
  "mobile": "9876543210",
  "pan": "ABCDE1234F",
  "currency": "INR",
  "opening_balance": "1000.00",
  "payment_terms": "net_30",
  "billing_attention": "Accounts",
  "billing_country": "India",
  "billing_street1": "123 Main St",
  "billing_street2": "Suite 100",
  "billing_city": "Mumbai",
  "billing_state": "MH",
  "billing_pin_code": "400001",
  "billing_phone": "0221234567",
  "billing_fax": "0227654321",
  "shipping_attention": "Warehouse",
  "shipping_country": "India",
  "shipping_street1": "456 Warehouse Rd",
  "shipping_street2": "",
  "shipping_city": "Mumbai",
  "shipping_state": "MH",
  "shipping_pin_code": "400002",
  "shipping_phone": "0229876543",
  "shipping_fax": "0223456789",
  "custom_fields": {"GSTIN": "27ABCDE1234F1Z5"},
  "tags": ["priority", "2025"],
  "remarks": "Important customer"
}

####
# Retrieve customer (with nested documents and contact persons)
GET http://localhost:8000/api/customers/1/
Authorization: Bearer <access_token>

####
# Update customer (partial or full)
PUT http://localhost:8000/api/customers/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "display_name": "Acme Corp (John D.)",
  "remarks": "Updated remarks"
}

####
# Delete customer
DELETE http://localhost:8000/api/customers/1/
Authorization: Bearer <access_token>

### VENDORS CRUD

# List vendors
GET http://localhost:8000/api/vendors/
Authorization: Bearer <access_token>

####
# Create vendor
POST http://localhost:8000/api/vendors/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "name": "Vendor Inc",
    "email": "vendor@example.com",
    "company_name": "Vendor Incorporated",
    "address": "456 Vendor St",
    "phone": "9876543210"
}

####
# Retrieve vendor
GET http://localhost:8000/api/vendors/1/
Authorization: Bearer <access_token>

####
# Update vendor
PUT http://localhost:8000/api/vendors/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "name": "Vendor Inc Updated",
    "email": "vendor@example.com",
    "company_name": "Vendor Incorporated",
    "address": "789 Vendor Ave",
    "phone": "9876543210"
}

####
# Delete vendor
DELETE http://localhost:8000/api/vendors/1/
Authorization: Bearer <access_token>

### INVOICES CRUD

# List invoices
GET http://localhost:8000/api/invoices/
Authorization: Bearer <access_token>

####
# Create invoice (all fields, with files)
POST http://localhost:8000/api/invoices/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_id": 1,
  "invoice_number": "INV-2025-001",
  "order_number": "ORD-123",
  "invoice_date": "2025-08-30",
  "customer_notes": "Thank you for your business.",
  "terms_and_conditions": "Payment due in 30 days.",
  "total_amount": "15000.00",
  "file_ids": [1, 2]
}

####
# Retrieve invoice (with nested item details and files)
GET http://localhost:8000/api/invoices/1/
Authorization: Bearer <access_token>

####
# Update invoice (partial or full)
PUT http://localhost:8000/api/invoices/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_notes": "Updated notes",
  "total_amount": "16000.00"
}

####
# Delete invoice
DELETE http://localhost:8000/api/invoices/1/
Authorization: Bearer <access_token>

### ITEMS CRUD

# List items
GET http://localhost:8000/api/items/
Authorization: Bearer <access_token>

####
# Create item
POST http://localhost:8000/api/items/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "name": "Item 1",
    "description": "A sample item",
    "price": "10.00",
    "sku": "SKU001"
}

####
# Retrieve item
GET http://localhost:8000/api/items/1/
Authorization: Bearer <access_token>

####
# Update item
PUT http://localhost:8000/api/items/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "name": "Item 1 Updated",
    "description": "Updated description",
    "price": "12.00",
    "sku": "SKU001"
}

####
# Delete item
DELETE http://localhost:8000/api/items/1/
Authorization: Bearer <access_token>

### PAYMENTS CRUD

# List payments
GET http://localhost:8000/api/payments/
Authorization: Bearer <access_token>

####
# Create payment
POST http://localhost:8000/api/payments/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "invoice_id": 1,
    "amount": "500.00",
    "date": "2025-08-25",
    "method": "Bank Transfer",
    "notes": "Full payment received"
}

####
# Retrieve payment
GET http://localhost:8000/api/payments/1/
Authorization: Bearer <access_token>

####
# Update payment
PUT http://localhost:8000/api/payments/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "invoice_id": 1,
    "amount": "600.00",
    "date": "2025-08-26",
    "method": "Credit Card",
    "notes": "Updated payment"
}

####
# Delete payment
DELETE http://localhost:8000/api/payments/1/
Authorization: Bearer <access_token>

### QUOTES CRUD

# List quotes
GET http://localhost:8000/api/quotes/
Authorization: Bearer <access_token>

####
# Create quote (all fields, no items)
POST http://localhost:8000/api/quotes/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_id": 1,
  "quote_number": "Q-2025-001",
  "reference_number": "REF-123",
  "quote_date": "2025-08-27",
  "expiry_date": "2025-09-10",
  "salesperson": "Alice Smith",
  "project_name": "Project X",
  "subject": "Quotation for Project X",
  "customer_notes": "Please review and confirm.",
  "terms_and_conditions": "Payment within 30 days.",
  "subtotal": "10000.00",
  "discount": "5.00",
  "tax_type": "TDS",
  "tax_percentage": "5",
  "adjustment": "-100.00",
  "total_amount": "9500.00"
}

####
# Retrieve quote (with nested item details)
GET http://localhost:8000/api/quotes/1/
Authorization: Bearer <access_token>

####
# Update quote (partial or full)
PUT http://localhost:8000/api/quotes/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "subject": "Updated subject",
  "discount": "10.00"
}

####
# Delete quote
DELETE http://localhost:8000/api/quotes/1/
Authorization: Bearer <access_token>

## Add item to quote (QuoteItem; structure identical to ProformaInvoiceItem)
POST http://localhost:8000/api/quoteitems/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "quote": 1,
  "item_id": 1,
  "quantity": 2,
  "rate": "5000.00",
  "amount": "10000.00"
}

### PROFORMA INVOICES CRUD

# List proforma invoices
GET http://localhost:8000/api/proforma-invoices/
Authorization: Bearer <access_token>

####
# Create proforma invoice (all fields, no items)
POST http://localhost:8000/api/proforma-invoices/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_id": 1,
  "invoice_number": "P-2025-001",
  "reference_number": "REF-456",
  "invoice_date": "2025-08-30",
  "expiry_date": "2025-09-15",
  "salesperson": "Bob Jones",
  "project_name": "Project Y",
  "subject": "Proforma Invoice for Project Y",
  "customer_notes": "Please process this proforma invoice.",
  "terms_and_conditions": "Payment within 15 days.",
  "subtotal": "20000.00",
  "discount": "10.00",
  "tax_type": "TDS",
  "tax_percentage": "12",
  "adjustment": "-500.00",
  "total_amount": "17500.00"
}

####
# Retrieve proforma invoice (with nested item details)
GET http://localhost:8000/api/proforma-invoices/1/
Authorization: Bearer <access_token>

####
# Update proforma invoice (partial or full)
PUT http://localhost:8000/api/proforma-invoices/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "subject": "Updated subject",
  "discount": "15.00"
}

####
# Delete proforma invoice
DELETE http://localhost:8000/api/proforma-invoices/1/
Authorization: Bearer <access_token>

## Add item to proforma invoice (ProformaInvoiceItem; structure identical to QuoteItem)
POST http://localhost:8000/api/proformainvoiceitems/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "proforma_invoice": 1,
  "item_id": 1,
  "quantity": 3,
  "rate": "5000.00",
  "amount": "15000.00"
}

### DELIVERY CHALLANS CRUD

# List delivery challans
GET http://localhost:8000/api/delivery-challans/
Authorization: Bearer <access_token>

####
# Create delivery challan (all fields)
POST http://localhost:8000/api/delivery-challans/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "customer_id": 1,
  "challan_number": "DC-2025-001",
  "reference_number": "REF-789",
  "date": "2025-08-30",
  "challan_type": "liquid_gas",
  "total_amount": "20000.00"
}

####
# Retrieve delivery challan (with nested item details)
GET http://localhost:8000/api/delivery-challans/1/
Authorization: Bearer <access_token>

####
# Update delivery challan (partial or full)
PUT http://localhost:8000/api/delivery-challans/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "challan_type": "job_work",
  "total_amount": "21000.00"
}

####
# Delete delivery challan
DELETE http://localhost:8000/api/delivery-challans/1/
Authorization: Bearer <access_token>


### BILLS CRUD

# List bills
GET http://localhost:8000/api/bills/
Authorization: Bearer <access_token>

####
# Create bill (basic fields)
POST http://localhost:8000/api/bills/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "vendor_id": 1,
  "bill_number": "BILL-2025-001",
  "reference_number": "REF-123",
  "status": "DRAFT",
  "bill_date": "2025-09-01",
  "due_date": "2025-09-15",
  "notes": "First bill for vendor.",
  "file_ids": [1]
}

####
# Retrieve bill (with nested item details and files)
GET http://localhost:8000/api/bills/1/
Authorization: Bearer <access_token>

####
# Update bill (partial or full)
PUT http://localhost:8000/api/bills/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
  "status": "PAID",
  "notes": "Bill paid in full."
}

####
# Delete bill
DELETE http://localhost:8000/api/bills/1/
Authorization: Bearer <access_token>

### INVENTORY ADJUSTMENTS CRUD

# List inventory adjustments
GET http://localhost:8000/api/inventory-adjustments/
Authorization: Bearer <access_token>

####
# Create inventory adjustment
POST http://localhost:8000/api/inventory-adjustments/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "item_id": 1,
    "adjustment_number": "ADJ-1001",
    "date": "2025-08-24",
    "quantity": 10,
    "reason": "Stock count correction",
    "notes": "Initial adjustment"
}

####
# Retrieve inventory adjustment
GET http://localhost:8000/api/inventory-adjustments/1/
Authorization: Bearer <access_token>

####
# Update inventory adjustment
PUT http://localhost:8000/api/inventory-adjustments/1/
Authorization: Bearer <access_token>
Content-Type: application/json

{
    "item_id": 1,
    "adjustment_number": "ADJ-1001",
    "date": "2025-08-24",
    "quantity": 12,
    "reason": "Correction",
    "notes": "Updated adjustment"
}

####
# Delete inventory adjustment
DELETE http://localhost:8000/api/inventory-adjustments/1/
Authorization: Bearer <access_token>

### PROFIT AND LOSS REPORT (UPDATED)

# Get Profit and Loss report for this month (compare with last month)
GET http://localhost:8000/api/reports/profit-and-loss/?time=This%20Month&basis=Accrual&compare_with=Last%20Month
Authorization: Bearer <access_token>

####
# Get Profit and Loss report for this year (no comparison)
GET http://localhost:8000/api/reports/profit-and-loss/?time=This%20Year&basis=Cash&compare_with=None
Authorization: Bearer <access_token>

#### Sample Output
{
  "period": "This Month",
  "basis": "Accrual",
  "start_date": "2025-08-01",
  "end_date": "2025-08-31",
  "report": {
    "operating_income": 15000.0,
    "cost_of_goods_sold": 8000.0,
    "gross_profit": 7000.0,
    "operating_expense": 0.0,
    "operating_profit": 7000.0,
    "non_operating_income": 0.0,
    "non_operating_expense": 0.0,
    "net_profit_loss": 7000.0,
    "payments_received": 12000.0,
    "invoice_breakdown": [ ... ],
    "bill_breakdown": [ ... ]
  },
  "compare_with": "Last Month",
  "compare_report": {
    ...same structure as report...
  }
}

# Get Profit and Loss report for this month (summary only)
GET http://localhost:8000/api/reports/profit-and-loss/?time=This%20Month&basis=Accrual&summary_only=true
Authorization: Bearer <access_token>

#### Sample Output (summary_only=true)
{
  "period": "This Month",
  "basis": "Accrual",
  "start_date": "2025-08-01",
  "end_date": "2025-08-31",
  "report": {
    "operating_income": 15000.0,
    "cost_of_goods_sold": 8000.0,
    "gross_profit": 7000.0,
    "operating_expense": 0.0,
    "operating_profit": 7000.0,
    "non_operating_income": 0.0,
    "non_operating_expense": 0.0,
    "net_profit_loss": 7000.0,
    "payments_received": 12000.0,
    "invoice_breakdown": null,
    "bill_breakdown": null
  }
}

### BALANCE SHEET REPORT

# Get Balance Sheet for today (accrual basis)
GET http://localhost:8000/api/reports/balance-sheet/?time=Today&basis=Accrual
Authorization: Bearer <access_token>

####
# Get Balance Sheet for this month (cash basis)
GET http://localhost:8000/api/reports/balance-sheet/?time=This%20Month&basis=Cash
Authorization: Bearer <access_token>